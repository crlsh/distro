<div class="container">
  <h2>Toma de Pedido</h2>

  <div class="mb-3">
    <label for="clienteSearch" class="form-label">Buscar Cliente</label>
    <input type="text" id="clienteSearch" class="form-control" placeholder="Buscar por CUIT o apellido" (input)="buscarCliente(obtenerValorEvento($event))">
    <ul class="list-group mt-2" *ngIf="clientesFiltrados.length > 0">
      <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let cliente of clientesFiltrados">
        {{ cliente.apellido }}, {{ cliente.nombre }} ({{ cliente.cuit }})
        <button class="btn btn-primary btn-sm" (click)="seleccionarCliente(cliente)">Seleccionar</button>
      </li>
    </ul>
  </div>

  <div *ngIf="clienteSeleccionado" class="mb-3">
    <h4>Cliente Seleccionado: {{ clienteSeleccionado.apellido }}, {{ clienteSeleccionado.nombre }}</h4>
  </div>

  <div class="mb-3">
    <label for="productoSearch" class="form-label">Buscar Producto</label>
    <input type="text" id="productoSearch" class="form-control" placeholder="Buscar por nombre o cÃ³digo" (input)="buscarProducto(obtenerValorEvento($event))">
    <ul class="list-group mt-2" *ngIf="productosFiltrados.length > 0">
      <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let producto of productosFiltrados">
        {{ producto.nombre }} ({{ producto.codigo }}) - ${{ producto.precio }}
        <button class="btn btn-primary btn-sm" (click)="agregarProducto(producto)">Agregar</button>
      </li>
    </ul>
  </div>

  <div class="mb-3">
    <h4>Pedido</h4>
    <ul class="list-group">
      <li class="list-group-item" *ngFor="let item of pedido; let i = index">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            {{ item.producto.nombre }}
          </div>
          <div class="d-flex align-items-center">
            <div class="mr-3">Precio: ${{ item.precio }}</div>
            <input type="number" class="form-control d-inline-block w-auto" [(ngModel)]="item.cantidad" placeholder="Cantidad" min="1">
            <input type="number" class="form-control d-inline-block w-auto" [(ngModel)]="item.descuento" placeholder="Descuento" min="0">
            <button class="btn btn-danger btn-sm" (click)="eliminarProducto(i)">Eliminar</button>
          </div>
        </div>
      </li>
    </ul>
  </div>
  
  <button class="btn btn-success" (click)="guardarPedido()">Guardar Pedido</button>
</div>
